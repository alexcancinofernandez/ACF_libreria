{% extends 'app_tienda/admin/admin_base.html' %}


{% block title %}Dashboard - Administración{% endblock %}

{% block admin_content %}
<h3><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h3>
<p>Resumen general de la actividad de la tienda.</p>

<div class="row">
    <!-- Tarjeta de Ingresos Totales -->
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-success">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Ingresos Totales</h5>
                        <p class="card-text fs-4">${{ total_ingresos|floatformat:2 }}</p>
                    </div>
                    <i class="fas fa-dollar-sign fa-3x opacity-50"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Tarjeta de Pedidos Totales -->
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-info">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Pedidos Totales</h5>
                        <p class="card-text fs-4">{{ total_pedidos }}</p>
                    </div>
                    <i class="fas fa-box fa-3x opacity-50"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Tarjeta de Usuarios Registrados -->
    <div class="col-md-4 mb-4">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="card-title">Usuarios Registrados</h5>
                        <p class="card-text fs-4">{{ total_usuarios }}</p>
                    </div>
                    <i class="fas fa-users fa-3x opacity-50"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Pedidos Recientes -->
<div class="card">
    <div class="card-header">
        <i class="fas fa-box me-2"></i>Pedidos Recientes
    </div>
    <div class="card-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th># Pedido</th>
                    <th>Cliente</th>
                    <th>Fecha</th>
                    <th>Total</th>
                    <th>Estado</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for pedido in pedidos_recientes %}
                    <tr>
                        <td>{{ pedido.numero_pedido }}</td>
                        <td>{{ pedido.usuario.get_full_name|default:pedido.usuario.username }}</td>
                        <td>{{ pedido.fecha_creacion|date:"d/m/Y H:i" }}</td>
                        <td>${{ pedido.total|floatformat:2 }}</td>
                        <td><span class="badge bg-info">{{ pedido.get_estado_display }}</span></td>
                        <td><a href="{% url 'app_tienda:admin_detalle_pedido' pedido.numero_pedido %}" class="btn btn-sm btn-outline-primary">Ver</a></td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" class="text-center">No hay pedidos recientes.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
